# Config for zplug
# https://github.com/zplug/zplug

export ZPLUG_HOME="/usr/local/opt/zplug"

source "${ZPLUG_HOME}/init.zsh"

zplug 'zplug/zplug', hook-build:'zplug --self-manage'

zplug 'romkatv/powerlevel10k', \
  use:'powerlevel10k.zsh-theme', \
  from:github, \
  as:theme, \
  hook-load:"source ${DOTFILES}/zsh/purepower/load.zsh"

export ZSH_AUTOSUGGEST_USE_ASYNC=1
zplug 'zsh-users/zsh-autosuggestions'

zplug 'zsh-users/zsh-completions', lazy:true
zplug '/usr/local/opt/curl/share/zsh/site-functions', from:local, lazy:true

zplug 'knu/z', use:'z.sh', defer:2
# zplug 'plugins/z', from:'oh-my-zsh'
# zplug 'rupa/z', use:'z.sh'
zplug 'changyuheng/zsh-interactive-cd'

# oh-my-zsh plugins
zplug 'plugins/colored-man-pages', from:'oh-my-zsh'
zplug 'plugins/cp', from:'oh-my-zsh'
zplug 'plugins/docker', from:'oh-my-zsh'
zplug 'plugins/docker-compose', from:'oh-my-zsh'
zplug 'plugins/httpie', from:'oh-my-zsh'
zplug 'plugins/git', from:'oh-my-zsh'
zplug 'plugins/git-extras', from:'oh-my-zsh'
zplug 'plugins/github', from:'oh-my-zsh'
zplug 'plugins/osx', from:'oh-my-zsh'
zplug 'plugins/zsh-nvm', from:'oh-my-zsh'

zplug 'plugins/vi-mode', from:'oh-my-zsh', \
  hook-load:'unset RPS1 MODE_INDICATOR'  # Prevent the plugin from adding the right prompt

##
# Setup and fix forgit environment
##
FORGIT_NO_ALIASES=1
FORGIT_FZF_DEFAULT_OPTS="--layout=reverse"
zplug 'wfxr/forgit', defer:1, hook-load:'unset FORGIT_NO_ALIASES; autoload forgit'


if ! zplug check --verbose; then
  printf "Install? [y/N]: "
  if read -q; then
    echo; zplug install
  else
    echo
  fi
fi


zplug load
